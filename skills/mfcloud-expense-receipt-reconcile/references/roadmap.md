# MFクラウド経費：実装ロードマップ

## 目的
Amazon/楽天の領収書処理をまずMVPとして完成させ、その後に他サービス領収書の自動取得を同じ運用方針で拡張する。

## フェーズ構成

### Phase 1（MVP）: Amazon/楽天を完遂
対象:
- Amazon
- 楽天

到達目標:
- 指定対象月・指定範囲の領収書を漏れなく取得する
- PDFとして保存する
- 印刷は「手前まで自動（印刷準備）」で統一し、最終実行は手動にする
- MFの消込対象を抽出し、添付に進める資料を出力する

MVP完了条件（Done）:
1. 対象月のAmazon/楽天注文について、取得対象の領収書が欠損なく `orders.jsonl` と `pdfs/` に反映される
2. 除外設定保存後に `print_manifest.json` / `print_list.txt` / `print_all.ps1` が安定生成される
3. 自動印刷は行わず、手動印刷完了を記録できる
4. 消込候補（未添付候補）が `missing_evidence_candidates.csv/json` に出力される
5. MF添付作業に必要な資料（候補一覧、監査ログ、月次メモ）が揃う

MVPでの非対象:
- Amazon/楽天以外のサービス領収書自動取得
- MFへの最終申請ボタン押下の自動化

### Phase 2: 他サービス領収書の自動取得拡張
対象候補:
- Aqua Voice
- ChatGPT
- Claude
- Replit

方針:
- Amazon/楽天で確立した共通フローを流用する
- 印刷ポリシーは共通で「印刷準備まで自動、最終印刷は手動」
- 新規ソースはアダプタ方式で追加し、ダッシュボードの操作体験を統一する

Phase 2完了条件（各ソース共通）:
1. 指定期間の請求/領収書を取得できる
2. PDF保存とメタデータ（発生日、金額、取引ID、取得元URL）を出力できる
3. 除外設定・印刷準備・完了記録のフローに統合できる
4. 消込候補抽出に取り込める

## 実装優先順位
1. Amazonの取得漏れゼロ化と安定化
2. 楽天の取得漏れゼロ化と安定化
3. Amazon/楽天のMVP受け入れテスト整備
4. Phase 2の共通アダプタ仕様策定
5. Aqua Voice -> ChatGPT -> Claude -> Replit の順で実装

## 運用上の固定ルール
- 印刷は常に「手前まで自動」「最終実行は手動」
- 監査可能性を維持するため、各アクションを `audit_log.jsonl` に記録する
- 仕様変更時は本ファイルと `operation_policy.md` の両方を更新する

## 実行チェックリスト
- Phase 1の実行確認は `references/mvp_checklist.md` を利用する
