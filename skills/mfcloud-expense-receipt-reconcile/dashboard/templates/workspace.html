<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>エージェント作業スペース</title>
    <link rel="stylesheet" href="/static/styles.css" />
  </head>
  <body>
    <div class="page workspace-page">
      <header class="hero">
        <div>
          <p class="eyebrow">作業スペース</p>
          <h1>エージェント作業スペース</h1>
          <p class="subtitle">
            必要なリンクとエージェント向けのプロンプトをまとめて管理します。設定内容はこのブラウザだけでなく共有保存されます。
          </p>
        </div>
        <div class="hero-meta">
          <div class="hero-tabs">
            <a class="pill" href="/">ウィザード</a>
            <a class="pill" href="/status">実行状況</a>
            <a class="pill is-active" href="/workspace">Workspace</a>
          </div>
        </div>
      </header>

      <section class="grid two">
        <div class="card">
          <h2>固定リンク</h2>
          <p class="muted">月次経費処理で必須のリンクです。</p>
          <ul class="workspace-link-list workspace-link-list-static">
            <li class="workspace-link-item" data-details-expanded="0">
              <div class="workspace-link-main" data-full-url="https://expense.moneyforward.com/expense_reports">
                <div class="workspace-link-head">
                  <a
                    class="secondary workspace-link-open"
                    data-workspace-link-open
                    href="https://expense.moneyforward.com/expense_reports"
                    target="_blank"
                    rel="noopener noreferrer"
                    title="https://expense.moneyforward.com/expense_reports"
                    aria-label="MF経費精算ページを開く（https://expense.moneyforward.com/expense_reports）"
                  >
                    MF経費精算ページ
                  </a>
                  <button type="button" class="workspace-url-toggle" data-workspace-url-toggle aria-label="詳細を表示">詳細</button>
                </div>
              </div>
              <div class="workspace-link-details" data-workspace-link-details>
                <a
                  class="workspace-link-domain"
                  href="https://expense.moneyforward.com/expense_reports"
                  target="_blank"
                  rel="noopener noreferrer"
                  title="https://expense.moneyforward.com/expense_reports"
                >
                  expense.moneyforward.com
                </a>
                <div
                  class="workspace-prompt-front"
                  data-prompt-front
                  data-prompt-key="mf_expense_reports"
                  data-prompt-label="MF経費精算ページ"
                  data-prompt-url="https://expense.moneyforward.com/expense_reports"
                ></div>
                <label class="workspace-link-note">
                  <span class="workspace-link-note-label">メモ</span>
                  <textarea
                    class="workspace-link-note-editor"
                    rows="3"
                    maxlength="4000"
                    placeholder="業務プロセスなどのメモ"
                    data-workspace-link-note
                    data-note-key="mf_expense_reports"
                  ></textarea>
                </label>
                <div class="workspace-link-actions">
                  <button
                    type="button"
                    class="secondary workspace-copy-url"
                    data-copy-url="https://expense.moneyforward.com/expense_reports"
                  >
                    URLをコピー
                  </button>
                  <button
                    type="button"
                    class="secondary workspace-copy-prompt"
                    data-prompt-key="mf_expense_reports"
                  >
                    プロンプトをコピー
                  </button>
                  <button
                    type="button"
                    class="secondary workspace-edit-prompt"
                    data-prompt-key="mf_expense_reports"
                  >
                    編集
                  </button>
                </div>
              </div>
            </li>
          </ul>
        </div>

        <div class="card">
          <h2>追加リンク</h2>
          <p class="muted">必要に応じてリンクを追加できます。</p>
          <form id="workspace-link-form" class="form workspace-link-form">
            <label for="workspace-link-label">
              リンク名
              <input
                id="workspace-link-label"
                type="text"
                name="label"
                maxlength="80"
                placeholder="例: MF経費申請一覧"
                required
              />
            </label>
            <label for="workspace-link-url">
              URL
              <input
                id="workspace-link-url"
                type="url"
                name="url"
                placeholder="https://..."
                required
              />
            </label>
            <div class="step-actions">
              <button type="submit" class="primary">リンクを追加</button>
              <button type="button" class="secondary" id="workspace-clear-links">追加リンクを全削除</button>
            </div>
          </form>
          <ul id="workspace-custom-links" class="workspace-link-list"></ul>
          <p id="workspace-custom-links-empty" class="muted">追加リンクはまだありません。</p>
        </div>
      </section>

      <section class="card workspace-prompt-card">
        <h2>プロンプト編集</h2>
        <p class="muted">
          プロンプト本文を自由に編集し、ワンクリックでコピーできます。上書きは自動保存されます。
        </p>
        <div class="muted">編集対象: <span id="workspace-prompt-active-label">MF経費精算ページ</span></div>
        <label for="workspace-prompt-editor">
          プロンプト本文
          <textarea
            id="workspace-prompt-editor"
            class="workspace-prompt-editor"
            rows="14"
            spellcheck="false"
          ></textarea>
        </label>
        <div class="workspace-prompt-meta">
          <span id="workspace-prompt-status" class="muted">自動保存待機中。</span>
          <span id="workspace-prompt-count" class="muted">0 文字</span>
        </div>
        <div class="step-actions">
          <button type="button" id="workspace-save-prompt" class="primary">登録</button>
        </div>
        <div class="workspace-token-help">
          <span class="workspace-token-chip">{month}</span>
          <span class="workspace-token-chip">{reports_path}</span>
          <span class="workspace-token-chip">{notes}</span>
        </div>
      </section>
    </div>

    <div id="toast" class="toast" aria-live="polite"></div>
    <script src="/static/js/common.js"></script>
    <script src="/static/js/workspace.js"></script>
  </body>
</html>
